<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kısa Şifreleme, QR Kod ve Çözme</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; background-color: #f4f4f4; }
        textarea, input { width: 100%; padding: 10px; margin: 10px 0; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        p { background-color: #fff; padding: 10px; border-radius: 5px; }
        img { margin-top: 10px; }
    </style>
</head>
<body>

    <h1>Kısa Şifreleme, QR Kod ve Çözme</h1>
    <textarea id="plainText" placeholder="Şifrelemek ve QR koda dönüştürmek istediğiniz metni buraya girin"></textarea>
    <button onclick="shortEncryptAndGenerateQR()">Şifrele ve QR Kod Oluştur</button>
    <button onclick="shortDecrypt()">Çöz</button>
    <p id="result"></p>
    <img id="qrCodeImage" src="" alt="QR Kodunuz burada görünecek" />
    <p id="qrCodeURL"></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
        const map = {}; // Şifreleme için basit bir harita (dictionary)

        function shortEncryptAndGenerateQR() {
            const plainText = document.getElementById("plainText").value;
            
            // Basit kısa kod oluşturma ve şifreleme
            let shortCode = Math.random().toString(36).substring(2, 7); // Rastgele 5 karakterlik bir kod üret
            map[shortCode] = plainText; // Kodu orijinal metinle eşleştir
            
            // QR kodu oluşturma
            const qrCode = new QRCode(document.getElementById("qrCodeImage"), {
                text: shortCode,
                width: 256,
                height: 256,
            });

            // URL oluşturma
            const url = window.location.href.split('?')[0] + '?code=' + encodeURIComponent(shortCode);
            document.getElementById("qrCodeURL").innerHTML = 'URL: <a href="' + url + '" target="_blank">' + url + '</a>';
            document.getElementById("result").innerText = "Kısa Şifrelenmiş Metin: " + shortCode;
        }

        function shortDecrypt() {
            const shortCode = document.getElementById("plainText").value;
            const decryptedText = map[shortCode]; // Kodu çöz
            if (decryptedText) {
                document.getElementById("result").innerText = "Çözülmüş Metin: " + decryptedText;
            } else {
                document.getElementById("result").innerText = "Geçersiz kod!";
            }
        }
    </script>

</body>
</html>
